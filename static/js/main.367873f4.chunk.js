(this["webpackJsonptezos-secrets"]=this["webpackJsonptezos-secrets"]||[]).push([[0],{163:function(t,e){},224:function(t,e,n){},225:function(t,e,n){},231:function(t,e){},233:function(t,e){},295:function(t,e){},297:function(t,e){},307:function(t,e){},309:function(t,e){},341:function(t,e){},343:function(t,e){},344:function(t,e){},349:function(t,e){},351:function(t,e){},370:function(t,e){},382:function(t,e){},385:function(t,e){},405:function(t,e,n){},408:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n.n(c),a=n(25),s=n.n(a),o=(n(224),n(0)),i=n(38),u=n(20),l=(n(225),n(61)),j=n(92),b=n(19),p=n(441),f=n(440),d=n(40),h=n.n(d),O=n.p+"static/media/spinner.d99b4eae.svg",g=(n(405),n(13)),x=new l.a("https://rpc.ghostnet.teztnets.xyz"),v=new j.a({name:"ONCHAIN",preferredNetwork:b.o.CUSTOM});x.setWalletProvider(v);var y=function(){var t=Object(c.useState)(1e3),e=Object(u.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(12),s=Object(u.a)(a,2),l=s[0],j=s[1],b=Object(c.useState)(59),f=Object(u.a)(b,2),d=f[0],O=f[1],v=Object(c.useState)(1660042341),y=Object(u.a)(v,2),k=y[0],m=y[1],w=Object(c.useState)(0),T=Object(u.a)(w,2),z=T[0],S=T[1],C=Object(c.useState)(0),N=Object(u.a)(C,2),A=N[0],K=N[1],P=Object(c.useState)([]),W=Object(u.a)(P,2),B=W[0],L=W[1],E=Object(c.useState)(-1),I=Object(u.a)(E,2),M=I[0],Q=I[1];function V(){return Y.apply(this,arguments)}function Y(){return(Y=Object(i.a)(Object(o.a)().mark((function t(){var e,n,c,r,a,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("https://api.ghostnet.tzkt.io/v1/contracts/KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS/storage");case 2:return e=t.sent,console.log(e.data),n=new Date(e.data.lastClick),c=Math.floor(n/1e3),console.log(c),t.next=9,h.a.get("https://api.ghostnet.tzkt.io/v1/accounts/KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS/balance");case 9:return r=t.sent,console.log(r.data-e.data.operationFee),S(r.data-e.data.operationFee),m(c),Q(e.data.gameState),t.next=16,h.a.get("https://api.ghostnet.tzkt.io/v1/contracts/KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS/bigmaps/clickers/keys");case 16:return a=t.sent,K(a.data[e.data.clickCounter-1].value),t.next=20,h.a.get("https://api.ghostnet.tzkt.io/v1/contracts/KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS/bigmaps/colors/keys");case 20:s=t.sent,L(s.data),console.log(s.data);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var t=Date.now(),e=Math.floor(t/1e3);console.log(e),r(k+3600-e)}),[k]),Object(c.useEffect)((function(){var t=setInterval((function(){r((function(t){return t-1}))}),1e3);return function(){return clearInterval(t)}}),[n]),Object(c.useEffect)((function(){j(Math.floor(n/60)),O(n%60)}),[n]),Object(c.useEffect)((function(){V()}),[]),Object(g.jsxs)("div",{style:{marginBottom:100},children:[1==M&&n>0&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(g.jsx)("div",{style:{display:"flex",alignItems:"center"},children:Object(g.jsxs)("div",{children:[Object(g.jsxs)("h1",{style:{fontSize:"2em"},children:[l<10?"0"+l:l,":",d<10?"0"+d:d," "]}),Object(g.jsxs)("b",{style:{backgroundColor:function(t){console.log("test performance");for(var e=0;e<B.length;e++)if(B[e].key===t)return B[e].value;return"gray"}(A),padding:10,color:"black"},children:[" ",A]})]})}),Object(g.jsx)("div",{style:{margin:50,marginInline:200,paddingRight:"10%"},children:Object(g.jsx)("div",{class:"buttn",onClick:Object(i.a)(Object(o.a)().mark((function t(){var e,n,c,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("dont push the button !"),t.next=3,x.wallet.at("KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS");case 3:return e=t.sent,t.prev=4,t.next=7,e.methods.clickButton().send({mutez:!0,amount:1e6});case 7:return n=t.sent,t.next=10,n.confirmation();case 10:return c=t.sent,t.next=13,e.storage();case 13:r=t.sent,console.log(c),console.log(r),V(),S(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[4,20]])})))})}),Object(g.jsx)("div",{style:{display:"flex",alignItems:"center"},children:Object(g.jsxs)("h1",{style:{fontSize:"2em"},children:["Prize: ",z/1e6," XTZ "]})})]}),Object(g.jsx)("div",{style:{fontSize:"2em",textAlign:"center"},children:"Press = 1 xtz"})]}),1==M&&n<=0&&Object(g.jsx)(p.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){var e,n,c,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("dont push the button !"),t.next=3,x.wallet.at("KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS");case 3:return e=t.sent,t.prev=4,t.next=7,e.methods.endGame().send();case 7:return n=t.sent,t.next=10,n.confirmation();case 10:return c=t.sent,t.next=13,e.storage();case 13:r=t.sent,console.log(c),console.log(r),V(),S(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[4,20]])}))),children:"conclude game"}),0==M&&Object(g.jsx)("div",{children:Object(g.jsx)(p.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){var e,n,c,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("dont push the button !"),t.next=3,x.wallet.at("KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS");case 3:return e=t.sent,t.prev=4,t.next=7,e.methods.startGame().send({mutez:!0,amount:1e7});case 7:return n=t.sent,t.next=10,n.confirmation();case 10:return c=t.sent,t.next=13,e.storage();case 13:r=t.sent,console.log(c),console.log(r),V(),S(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[4,20]])}))),children:"start game"})})]})},k=new l.a("https://rpc.ghostnet.teztnets.xyz"),m=new j.a({name:"ONCHAIN",preferredNetwork:b.o.CUSTOM}),w="KT1StWyhTJkNqL1o4PWjSF21sG4s9BTE9MmB";k.setWalletProvider(m);var T=function(){var t=Object(c.useState)(),e=Object(u.a)(t,2),n=e[0],a=e[1],s=r.a.useState(""),l=Object(u.a)(s,2),j=l[0],d=l[1],x=r.a.useState([]),v=Object(u.a)(x,2),T=v[0],z=v[1],S=r.a.useState(!1),C=Object(u.a)(S,2),N=C[0],A=C[1],K=Object(c.useState)([]),P=Object(u.a)(K,2),W=P[0],B=P[1];function L(){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(Object(o.a)().mark((function t(){var e;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.client.requestPermissions({network:{type:b.o.CUSTOM,name:"Ghostnet",rpcUrl:"https://rpc.ghostnet.teztnets.xyz"}});case 3:return e=t.sent,console.log("Got permissions:",e.address),t.t0=a,t.next=8,m.client.getActiveAccount();case 8:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(0),console.log("Got error:",t.t2);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function I(){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.clearActiveAccount();case 2:return t.t0=a,t.next=5,m.client.getActiveAccount();case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t){console.log("test performance");for(var e=0;e<W.length;e++)if(W[e].key===t)return W[e].value;return"gray"}return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,m.client.getActiveAccount();case 3:if(t.t1=t.sent,(0,t.t0)(t.t1),!n){t.next=12;break}return console.log(n.address),t.t2=a,t.next=10,m.client.getActiveAccount();case 10:t.t3=t.sent,(0,t.t2)(t.t3);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n]),Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(Object(o.a)().mark((function t(){var e,n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("https://api.ghostnet.tzkt.io/v1/contracts/".concat(w,"/bigmaps/posts/keys"));case 2:e=t.sent,n=e.data.reverse(),console.log(n),z(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function e(){return(e=Object(i.a)(Object(o.a)().mark((function t(){var e;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("https://api.ghostnet.tzkt.io/v1/contracts/KT1LTQAKNirVNk7C1bB7ji7rYPWgTytz8vwS/bigmaps/colors/keys");case 2:e=t.sent,B(e.data),console.log(e.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),function(){e.apply(this,arguments)}()}),[]),Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{style:{display:"flex"},children:[Object(g.jsx)(p.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),children:"ONChain"}),Object(g.jsx)(p.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?I():L();case 1:case"end":return t.stop()}}),t)}))),children:n?"unsync":"sync"})]}),Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(g.jsxs)("div",{style:{width:"70vw",marginTop:20},children:[Object(g.jsx)(y,{Tezos:k,wallet:m}),Object(g.jsxs)("div",{children:[Object(g.jsx)(f.a,{label:"Type here",variant:"outlined",value:j,onChange:function(t){t.target.value.length<510&&d(t.target.value)},fullWidth:!0}),Object(g.jsx)(p.a,{fullWidth:!0,onClick:Object(i.a)(Object(o.a)().mark((function t(){var e,c,r,a;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A(!0),t.next=3,k.wallet.at(w);case 3:return e=t.sent,t.prev=4,t.next=7,e.methods.default(j).send({mutez:!0,amount:0});case 7:return c=t.sent,t.next=10,c.confirmation();case 10:return r=t.sent,t.next=13,e.storage();case 13:a=t.sent,console.log(r),console.log(a),d(""),z([{value:{author:n.address,post:j}}].concat(T)),A(!1),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),console.log(t.t0),A(!1);case 25:case"end":return t.stop()}}),t,null,[[4,21]])}))),children:N?Object(g.jsx)("img",{alt:"loading",src:O,style:{width:60}}):"Post"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("br",{}),T&&T.map((function(t){return Object(g.jsxs)("div",{children:[t.value.post,Object(g.jsx)("br",{}),Object(g.jsx)("div",{style:{textAlign:"right"},children:Object(g.jsx)("b",{style:{color:"black",textAlign:"right",backgroundColor:Q(t.value.author),padding:10},children:t.value.author})}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]},t.key)}))]})]})]})})]})};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(T,{})}),document.getElementById("root"))}},[[408,1,2]]]);
//# sourceMappingURL=main.367873f4.chunk.js.map