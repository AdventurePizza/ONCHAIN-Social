(this["webpackJsonptezos-secrets"]=this["webpackJsonptezos-secrets"]||[]).push([[0],{162:function(t,e){},223:function(t,e,n){},224:function(t,e,n){},230:function(t,e){},232:function(t,e){},294:function(t,e){},296:function(t,e){},306:function(t,e){},308:function(t,e){},340:function(t,e){},342:function(t,e){},343:function(t,e){},348:function(t,e){},350:function(t,e){},369:function(t,e){},381:function(t,e){},384:function(t,e){},406:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n.n(c),s=n(23),a=n.n(s),o=(n(223),n(0)),i=n(59),u=n(26),l=(n(224),n(76)),j=n(208),p=n(18),f=n(440),b=n(439),O=n(62),d=n.n(O),h=n.p+"static/media/spinner.d99b4eae.svg",x=n(29),v=new l.a("https://rpc.ghostnet.teztnets.xyz"),g=new j.a({name:"ONCHAIN",preferredNetwork:p.o.CUSTOM}),y="KT1StWyhTJkNqL1o4PWjSF21sG4s9BTE9MmB";v.setWalletProvider(g);var w=function(){var t=Object(c.useState)(),e=Object(u.a)(t,2),n=e[0],s=e[1],a=r.a.useState(""),l=Object(u.a)(a,2),j=l[0],O=l[1],w=r.a.useState([]),m=Object(u.a)(w,2),k=m[0],A=m[1],S=r.a.useState(!1),C=Object(u.a)(S,2),T=C[0],z=C[1];function E(){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(Object(o.a)().mark((function t(){var e;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return[p.x.OPERATION_REQUEST,p.x.SIGN],t.prev=1,t.next=4,g.client.requestPermissions({network:{type:p.o.CUSTOM,name:"Ghostnet",rpcUrl:"https://rpc.ghostnet.teztnets.xyz"}});case 4:return e=t.sent,console.log("Got permissions:",e.address),t.t0=s,t.next=9,g.client.getActiveAccount();case 9:t.t1=t.sent,(0,t.t0)(t.t1),t.next=16;break;case 13:t.prev=13,t.t2=t.catch(1),console.log("Got error:",t.t2);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function G(){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.clearActiveAccount();case 2:return t.t0=s,t.next=5,g.client.getActiveAccount();case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,g.client.getActiveAccount();case 3:if(t.t1=t.sent,(0,t.t0)(t.t1),!n){t.next=12;break}return console.log(n.address),t.t2=s,t.next=10,g.client.getActiveAccount();case 10:t.t3=t.sent,(0,t.t2)(t.t3);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n]),Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(Object(o.a)().mark((function t(){var e,n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://api.ghostnet.tzkt.io/v1/contracts/".concat(y,"/bigmaps/posts/keys"));case 2:e=t.sent,n=e.data.reverse(),console.log(n),A(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)(f.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),children:"ONChain"}),Object(x.jsx)(f.a,{onClick:Object(i.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?G():E();case 1:case"end":return t.stop()}}),t)}))),children:n?"unsync":"sync"})]}),Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(x.jsx)("div",{style:{width:"70vw",marginTop:20},children:Object(x.jsxs)("div",{children:[Object(x.jsx)(b.a,{label:"Type here",variant:"outlined",value:j,onChange:function(t){t.target.value.length<510&&O(t.target.value)},fullWidth:!0}),Object(x.jsx)(f.a,{fullWidth:!0,onClick:Object(i.a)(Object(o.a)().mark((function t(){var e,c,r,s;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return z(!0),t.next=3,v.wallet.at(y);case 3:return e=t.sent,t.prev=4,t.next=7,e.methods.default(j).send({mutez:!0,amount:0});case 7:return c=t.sent,t.next=10,c.confirmation();case 10:return r=t.sent,t.next=13,e.storage();case 13:s=t.sent,console.log(r),console.log(s),O(""),A([{value:{author:n.address,post:j}}].concat(k)),z(!1),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),console.log(t.t0),z(!1);case 25:case"end":return t.stop()}}),t,null,[[4,21]])}))),children:T?Object(x.jsx)("img",{src:h,style:{width:60}}):"Post"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),k&&k.map((function(t){return Object(x.jsxs)("div",{children:[t.value.post,Object(x.jsx)("br",{}),Object(x.jsx)("div",{style:{textAlign:"right"},children:t.value.author}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]},t.key)}))]})]})})})]})};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(w,{})}),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.a591458c.chunk.js.map